<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<title>Labirint Oyunu</title>
<style>
  body {
    background: #111;
    color: white;
    font-family: Arial;
    text-align: center;
  }

  #info {
    font-size: 20px;
    margin: 10px;
  }

  #maze {
    display: grid;
    grid-template-columns: repeat(10, 40px);
    grid-template-rows: repeat(10, 40px);
    margin: 20px auto;
    width: 400px;
  }

  .cell {
    width: 40px;
    height: 40px;
    box-sizing: border-box;
  }

  .wall { background: #333; }
  .path { background: #eee; }
  .player { background: blue; }
  .end { background: green; }

  button {
    padding: 10px 20px;
    font-size: 18px;
    display: none;
  }
</style>
</head>
<body>

<h1>ðŸ§© Labirint Oyunu</h1>
<div id="info">Vaxt: <span id="time">60</span> | Xal: <span id="score">0</span></div>
<div id="maze"></div>
<button id="restart" onclick="restartGame()">TÉ™krar oyna</button>

<audio id="moveSound">
  <source src="https://www.soundjay.com/buttons/sounds/button-16.mp3">
</audio>

<script>
const mazeData = [
  "##########",
  "#P     # #",
  "# ### ## #",
  "#   #    #",
  "### # ####",
  "#   #    #",
  "# ### ####",
  "#     #  #",
  "# ###### #",
  "#        E"
];

let playerPos = {x:1, y:1};
let time = 60;
let score = 0;
let timer;

const maze = document.getElementById("maze");
const timeEl = document.getElementById("time");
const scoreEl = document.getElementById("score");
const sound = document.getElementById("moveSound");
const restartBtn = document.getElementById("restart");

function drawMaze() {
  maze.innerHTML = "";
  for (let y=0; y<10; y++) {
    for (let x=0; x<10; x++) {
      const cell = document.createElement("div");
      cell.classList.add("cell");

      const char = mazeData[y][x];
      if (char === "#") cell.classList.add("wall");
      else cell.classList.add("path");

      if (x === playerPos.x && y === playerPos.y)
        cell.classList.add("player");

      if (char === "E")
        cell.classList.add("end");

      maze.appendChild(cell);
    }
  }
}

function move(dx, dy) {
  const nx = playerPos.x + dx;
  const ny = playerPos.y + dy;

  if (mazeData[ny][nx] !== "#") {
    playerPos = {x:nx, y:ny};
    score++;
    scoreEl.textContent = score;
    sound.play();
    drawMaze();

    if (mazeData[ny][nx] === "E") {
      endGame("ðŸŽ‰ QAZANDIN!");
    }
  }
}

document.addEventListener("keydown", e => {
  if (time <= 0) return;
  if (e.key === "ArrowUp") move(0,-1);
  if (e.key === "ArrowDown") move(0,1);
  if (e.key === "ArrowLeft") move(-1,0);
  if (e.key === "ArrowRight") move(1,0);
});

function startTimer() {
  timer = setInterval(() => {
    time--;
    timeEl.textContent = time;
    if (time <= 0) endGame("â± Vaxt bitdi!");
  }, 1000);
}

function endGame(msg) {
  clearInterval(timer);
  alert(msg);
  restartBtn.style.display = "inline-block";
}

function restartGame() {
  location.reload();
}

drawMaze();
startTimer();
</script>

</body>
</html>
